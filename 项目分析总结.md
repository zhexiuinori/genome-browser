# XX DB 基因组数据库 - 项目分析总结

## 一、项目简介

这是一个基于 **React 18** 开发的**构属植物基因组数据库**前端应用，提供基因组数据的浏览、搜索、分析和可视化功能。

**版本**: v0.1  
**技术选型**: React + Ant Design + ECharts + JBrowse  
**开发工具**: Create React App  

---

## 二、核心技术

### 主要依赖

```
- React 18.3.1（前端框架）
- Ant Design 5.4.7（UI组件库）
- React Router 5.3.4（路由管理，HashRouter模式）
- ECharts 5.5.1（数据可视化）
- JBrowse 3.1.0（基因组浏览器）
- Axios 1.8.4（HTTP请求）
```

### 项目结构

```
src/
├── App.jsx                      # 主应用（布局+路由）
├── pages/                       # 页面目录
│   ├── Home/                    # 首页
│   ├── Search/                  # 搜索页
│   ├── Genomes/                 # 基因组浏览
│   │   └── Species/            # 物种详情
│   ├── Tools/                   # 工具集
│   │   ├── Blash/              # 序列比对
│   │   ├── jbrowse/            # 基因组浏览器
│   │   ├── ssrfinder/          # SSR查找
│   │   ├── synteny/            # 共线性分析
│   │   └── DE/                 # 差异表达分析
│   ├── Download/                # 下载中心
│   ├── Network/                 # 网络图
│   └── Test/                    # 测试页
└── images/                      # 图片资源
```

---

## 三、主要功能模块

### 1. 首页 (Home)

- 项目介绍和数据库说明
- 快速工具入口（Search、Genomes、Tools、Download）
- 统计信息展示
- 特色工具介绍

### 2. 搜索模块 (Search)

提供三种搜索模式：

**① 关键词搜索**
- 支持4种基因组类型（Euphorbia_lathyris、Ricinus_communis等）
- 支持GRCh37/GRCh38版本切换
- 示例：rs80338940、chr13:20766921-C-T

**② 位置搜索**
- 基因ID搜索：ENSG00000165474
- 基因符号搜索：GJB2

**③ 转录调控因子搜索**
- 按疾病名称搜索
- 示例：Waardenburg anophthalmia syndrome

**界面特点**：
- 折叠面板式设计
- 每种模式独立表单
- 提供示例数据填充
- 支持批量输入（多行转逗号）

### 3. 基因组浏览 (Genomes)

**左侧分类树**：
- 物种分类树形展示
- 搜索高亮功能
- 支持展开/折叠所有节点
- 点击节点筛选右侧列表

**右侧物种列表**：
- 卡片网格布局
- 显示物种图片和描述
- 分页展示（6/12/24条/页）
- 点击跳转到物种详情

### 4. 物种详情页 (Species)

**① 概览区域**
- 物种图片和基本信息
- 物种描述

**② SSR信息可视化**
- **SSR序列分布图**（折线图）
  - 按染色体分组显示
  - 横轴：序列类型（如AT、GC等）
  - 纵轴：数量
  - 支持数据缩放

- **SSR长度分布图**（柱状图）
  - 分类：单碱基、双碱基、三碱基、多碱基重复
  - 按染色体对比展示

**③ SSR基本信息表格**
- 字段：ID、Seqid、Source、Type、Start、End、Repeat Info等
- 功能：
  - 按Seqid筛选
  - 分页（10/15/30/50/100条/页）
  - 表头固定滚动
  - 显示总记录数

**④ 高级搜索**
- SSR ID/Name搜索
- Protein ID/Name搜索
- Product Description搜索
- Position位置搜索

### 5. 工具集 (Tools)

**工具列表**：

1. **BLASH** - 序列比对工具
   - 支持核苷酸和蛋白质序列
   - 文本输入或文件上传（.fasta/.fa）
   - 实时比对结果展示

2. **JBrowse** - 基因组浏览器
   - 集成专业JBrowse库
   - 可视化基因组序列和注释

3. **SSR Finder** - SSR查找工具
   - 简单重复序列分析

4. **Synteny Viewer** - 共线性查看器
   - 基因组共线性可视化

5. **DE Gene Analysis** - 差异表达分析
   - 差异表达基因可视化和统计

### 6. 下载中心 (Download)

- 基因组数据下载
- 注释文件下载
- 工具和资源下载

### 7. 网络图 (Network)

- 基因/蛋白互作网络可视化

---

## 四、技术亮点

### 1. 路由设计

- 使用 **HashRouter** 模式
- 懒加载优化（React.lazy + Suspense）
- 工具页面按需加载
- 智能面包屑导航

### 2. 数据可视化

**ECharts图表**：
- SSR序列分布折线图
- SSR长度分布柱状图
- 染色体数据智能排序（chr1, chr2, ..., chr10）
- 图表交互（缩放、tooltip、legend）

### 3. 组件设计

**自定义组件**：
- `CollapsibleCard` - 可折叠卡片（带动画）
- 动态面包屑导航
- 搜索高亮显示

### 4. 表格功能

- 列筛选
- 分页控制
- 动态调整每页条数
- 固定表头滚动
- 显示总记录数和快速跳转

### 5. 用户体验

- Loading状态提示
- 错误处理和消息提示
- 示例数据填充
- 文件类型验证
- 互斥输入控制

---

## 五、API接口设计

### 后端代理配置

```json
"proxy": "http://localhost:3001"
```

### 主要接口

| 接口 | 方法 | 功能 |
|------|------|------|
| `/api/species` | GET | 获取物种列表和树形结构 |
| `/api/species/species/:name` | GET | 获取物种详情 |
| `/api/ssrmarkers/stats/:shortName/repeat-sequence` | GET | SSR序列统计 |
| `/api/ssrmarkers/stats/:shortName/repeat-length` | GET | SSR长度统计 |
| `/api/ssrmarkers/stats/:shortName/basic-info` | GET | SSR基本信息 |
| `/api/blash/align` | POST | 序列比对 |

---

## 六、样式设计

### 主题色

- **主色**: `#2b84a0` (青蓝色)
- **辅助色**: `#258fb3`、`#6fa8dd`
- **警告色**: `#e6b92e`

### 布局

- Header固定顶部（60px高）
- Content左右边距15%
- 面包屑导航
- Footer包含链接

---

## 七、性能优化

### 已实现

✅ 工具页面懒加载（React.lazy）  
✅ 表格分页  
✅ 图表懒加载和增量渲染  
✅ useMemo缓存计算结果  
✅ 按需导入Ant Design组件  

### 可改进

- [ ] 添加Service Worker
- [ ] 图片懒加载
- [ ] 虚拟滚动（长列表）
- [ ] 使用React Query管理服务器状态
- [ ] 添加错误边界

---

## 八、开发命令

```bash
# 启动开发服务器（端口3000）
npm start

# 构建生产版本
npm run build

# 运行测试
npm test
```

---

## 九、项目特色

1. **专业性强** - 集成JBrowse、BLAST等专业生物信息学工具
2. **可视化丰富** - ECharts图表展示SSR统计数据
3. **用户体验好** - Ant Design保证UI一致性
4. **模块化设计** - 页面独立，易于维护和扩展
5. **性能优化** - 懒加载、分页、缓存等优化措施

---

## 十、适用场景

- ✅ 基因组数据库展示平台
- ✅ 生物信息学数据分析系统
- ✅ 科研数据可视化工具
- ✅ 教学演示平台
- ✅ 企业级React应用参考

---

## 十一、改进建议

### 功能增强

1. **搜索优化**
   - 添加搜索历史
   - 自动完成提示
   - 高级筛选

2. **数据导出**
   - 表格导出CSV/Excel
   - 图表导出图片
   - 批量下载

3. **用户系统**
   - 注册/登录
   - 收藏功能
   - 历史记录

4. **国际化**
   - 中英文切换

### 技术升级

- 引入TypeScript提升代码质量
- 添加单元测试和E2E测试
- 引入状态管理（Redux/Zustand）
- 配置CI/CD自动化部署

---

## 十二、总结

这是一个**功能完善、专业性强**的基因组数据库前端应用，适合作为：
- 生物信息学数据平台的前端解决方案
- React企业级应用的参考案例
- 数据可视化项目的学习模板

**技术水平**: 中高级React应用  
**代码质量**: 组织清晰，模块化程度高  
**用户体验**: 界面友好，交互流畅  
**可扩展性**: 模块化设计，易于扩展新功能  
